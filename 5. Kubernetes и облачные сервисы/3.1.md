#### 1. Дано:

| Тип         | CPU | RAM    | HDD    | Количество |
|:------------|:----|:-------|:-------|:-----------|
| База Данных | 1   | 4 GB   | 100 GB | 3          |
| Кеш         | 1   | 4 GB   | 200 MB | 3          |
| Фронтенд    | 0.2 | 50 MB  | 100 MB | 5          |
| Бэкенд      | 1   | 600 MB | 100 MB | 10         |

#### 2. Итого:

| **Тип**         | **CPU** | **RAM**       | **HDD**     | 
|:------------|:----|:----------|:--------|
| База данных | 3   | 12 GB     | 300 GB  | 
| Кеш         | 3   | 12 GB     | 600 MB  |
| Фронтенд    | 1   | 250 MB    | 500 MB  |
| Бэкенд      | 10  | 6 GB      | 1 GB    |
| **Всего**       | 17  | 30,224 GB | 302  GB | 

#### 3. Количество worker node:

Необходимо будет 4 и более worker node, т.к. база данных имеет 3 реплики и необходимо иметь n+1 в данном случае worker node

#### 4. Распределение приложений:

| Node1     | Node2     | Node3     |
|-----------|-----------|-----------|
| DB1       | DB2       | DB3       |
| Cache1    | Cache2    | Cache3    | 
| BackEnd1  | BackEnd2  | BackEnd3  |
| BackEnd4  | BackEnd5  | BackEnd6  |
| BackEnd7  | BackEnd8  | BackEnd9  |
| BackEnd10 | FrontEnd1 | FrontEnd2 |
| FrontEnd3 | FrontEnd4 | FrontEnd5 |

#### 5. Расчет:

По одной Node

| Type     | CPU | RAM     | HDD        | 
|:---------|:----|:--------|:-----------|
| DB       | 1   | 4 GB    | 100 GB     | 
| Cache    | 1   | 4 GB    | 100 MB     |
| FrontEnd | 0.2 | 50 MB   | 100 MB     |
| BackEnd  | 4   | 2,34 GB | 400 MB     |
| **Всего**    | 6.2 | 6,05 GB | 100.59  GB |

Если округлить CPU - 8 , RAM - 8 , Места - 150

| Расчёт CPU                          |     |
|-------------------------------------|-----|
| 6% от первого ядра                  | 60  |
| 1% от следующего ядра (до 2 ядер).  | 20  |
| 0,5% от следующих двух ядер (до 4). | 10  |
| 0,25% всех ядер выше четырех.       | 10  |
| **Всего**                               | 100 |

8000 - 100 =7.9 > 6.2

| Расчёт RAM                                     | 8 ГБ        | 10 ГБ       |
|------------------------------------------------|-------------|-------------|
| 255 МБАЙТ памяти для машин объемом менее 1 ГБ. | 1.25        | 1.25        |
| 25% от первых 4 ГБ памяти.                     | 0.8         | 0.8         |
| 20% от следующих 4 ГБ памяти (до 8 ГБ).        | 0.8         | 0.8         |
| 10% от следующих 8 ГБ памяти (до 16 ГБ)        | 0           | 0.8         |
| **Разность**                                       | 5.15 < 6.05 | 6.35 > 6.05 |


#### 6. Конфигурация:

| Type                | CPU | RAM   | HDD    | Количество |
|:--------------------|:----|:------|:-------|:-----------|
| Etcd nodes          | 2   | 8 GB  | 40 GB  | 5          |
| Loadbancer for etcd | 2   | 4 GB  | 40 GB  | 1          |
| Master nodes        | 2   | 4 GB  | 40 GB  | 3          |
| Worker nodes        | 8   | 10 GB | 150 GB | 4          |

Для etcd и loadbalancer делаем отдельные VM для обеспечения максимальной производительности и отказоустойчивости