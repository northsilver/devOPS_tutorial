- Задание 1
1. напишите список операций, которые вы будете производить для остановки запроса пользователя;
```text
найти операцию
db.currentOp({ "active" : true, "secs_running" : { "$gt" : 180 }})
по opid завершить 
db.killOp(%opid%)
```
2. предложите вариант решения проблемы с долгими (зависающими) запросами в MongoDB.
```text
1. Включить профайлер, изучить запросы помощью explain и попробовать оптимизировать их через построение индексов и прочее
2. Использовать максимальное время выполнения запроса через maxTimeMS()
```

- Задание 2
При масштабировании сервиса до N реплик вы увидели, что:
    сначала происходит рост отношения записанных значений к истекшим,
    Redis блокирует операции записи.
Как вы думаете, в чём может быть проблема?

```text
1. Посмотреть инфраструктуру сеть возможно влияет механизм Allow writes only with N attached replicas, проверить CPU/память/диски 
2. Превышен лимит памяти maxmemory
3. Проблема в методе удаления ключей с истекщим сроком действия ACTIVE_EXPIRE_CYCLE_LOOKUPS_PER_LOOP. Количество ключей, которые истекают в одно время больше 25% от текущего количества
```

- Задание 3
1. Как вы думаете, почему это начало происходить и как локализовать проблему?
```text
1. Возможно это сетевые проблемы, попробовать увеличить параметр connect_timeout, 
2. Затем посмотреть net_read_timeout возможно большой запрос 
3. Размер сообщения превышает размер буфера, заданного в переменной  max_allowed_packet
```

2. Какие пути решения этой проблемы вы можете предложить?
```text
Увеличить значения: wait_timeout, max_allowed_packet, net_write_timeout, net_read_timeout
```

- Задание 4
1. Как вы думаете, что происходит?
```text
Нехватка памяти в PostgreSQL
```
2. Как бы вы решили эту проблему?
```
1. Ограничить доступную память для PostgreSQL
   Посмотреть и изменить параметры: max_connections, shared_buffer, work_mem, effective_cache_size, maintenance_work_mem
2. Увеличить ресурсы сервера
```